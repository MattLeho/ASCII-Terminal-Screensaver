"""
Enhanced Font System for ASCII Clocks
Multiple character sets inspired by deybacsi/asciiclock
"""

# Font Set 1: Digital (7-segment style, 5x7)
FONT_DIGITAL = {
    '0': ["█████", "█   █", "█   █", "█   █", "█   █", "█   █", "█████"],
    '1': ["    █", "    █", "    █", "    █", "    █", "    █", "    █"],
    '2': ["█████", "    █", "    █", "█████", "█    ", "█    ", "█████"],
    '3': ["█████", "    █", "    █", "█████", "    █", "    █", "█████"],
    '4': ["█   █", "█   █", "█   █", "█████", "    █", "    █", "    █"],
    '5': ["█████", "█    ", "█    ", "█████", "    █", "    █", "█████"],
    '6': ["█████", "█    ", "█    ", "█████", "█   █", "█   █", "█████"],
    '7': ["█████", "    █", "    █", "    █", "    █", "    █", "    █"],
    '8': ["█████", "█   █", "█   █", "█████", "█   █", "█   █", "█████"],
    '9': ["█████", "█   █", "█   █", "█████", "    █", "    █", "█████"],
    ':': ["     ", "  █  ", "     ", "     ", "     ", "  █  ", "     "],
    ' ': ["     ", "     ", "     ", "     ", "     ", "     ", "     "],
}

# Font Set 2: Block (Chunky, 6x7)
FONT_BLOCK = {
    '0': ["██████", "██  ██", "██  ██", "██  ██", "██  ██", "██  ██", "██████"],
    '1': ["   ██ ", "  ███ ", "   ██ ", "   ██ ", "   ██ ", "   ██ ", " █████"],
    '2': ["██████", "    ██", "    ██", "██████", "██    ", "██    ", "██████"],
    '3': ["██████", "    ██", "    ██", " █████", "    ██", "    ██", "██████"],
    '4': ["██  ██", "██  ██", "██  ██", "██████", "    ██", "    ██", "    ██"],
    '5': ["██████", "██    ", "██    ", "██████", "    ██", "    ██", "██████"],
    '6': ["██████", "██    ", "██    ", "██████", "██  ██", "██  ██", "██████"],
    '7': ["██████", "    ██", "   ██ ", "  ██  ", "  ██  ", "  ██  ", "  ██  "],
    '8': ["██████", "██  ██", "██  ██", "██████", "██  ██", "██  ██", "██████"],
    '9': ["██████", "██  ██", "██  ██", "██████", "    ██", "    ██", "██████"],
    ':': ["      ", "  ██  ", "  ██  ", "      ", "  ██  ", "  ██  ", "      "],
    ' ': ["      ", "      ", "      ", "      ", "      ", "      ", "      "],
}

# Font Set 3: Thin (Minimal, 3x5)
FONT_THIN = {
    '0': ["███", "█ █", "█ █", "█ █", "███"],
    '1': [" █ ", "██ ", " █ ", " █ ", "███"],
    '2': ["███", "  █", "███", "█  ", "███"],
    '3': ["███", "  █", "███", "  █", "███"],
    '4': ["█ █", "█ █", "███", "  █", "  █"],
    '5': ["███", "█  ", "███", "  █", "███"],
    '6': ["███", "█  ", "███", "█ █", "███"],
    '7': ["███", "  █", "  █", "  █", "  █"],
    '8': ["███", "█ █", "███", "█ █", "███"],
    '9': ["███", "█ █", "███", "  █", "███"],
    ':': ["   ", " █ ", "   ", " █ ", "   "],
    ' ': ["   ", "   ", "   ", "   ", "   "],
}

# Font Set 4: Outline (Hollow, 5x7)
FONT_OUTLINE = {
    '0': ["┌───┐", "│   │", "│   │", "│   │", "│   │", "│   │", "└───┘"],
    '1': ["    │", "    │", "    │", "    │", "    │", "    │", "    │"],
    '2': ["┌───┐", "    │", "    │", "├───┘", "│    ", "│    ", "└───┘"],
    '3': ["┌───┐", "    │", "    │", "├───┤", "    │", "    │", "└───┘"],
    '4': ["│   │", "│   │", "│   │", "└───┤", "    │", "    │", "    │"],
    '5': ["┌───┐", "│    ", "│    ", "└───┐", "    │", "    │", "└───┘"],
    '6': ["┌───┐", "│    ", "│    ", "├───┐", "│   │", "│   │", "└───┘"],
    '7': ["┌───┐", "    │", "    │", "    │", "    │", "    │", "    │"],
    '8': ["┌───┐", "│   │", "│   │", "├───┤", "│   │", "│   │", "└───┘"],
    '9': ["┌───┐", "│   │", "│   │", "└───┤", "    │", "    │", "└───┘"],
    ':': ["     ", "  ●  ", "     ", "     ", "     ", "  ●  ", "     "],
    ' ': ["     ", "     ", "     ", "     ", "     ", "     ", "     "],
}

# Font Set 5: Mega (Thick, 7x7)
FONT_MEGA = {
    '0': ["███████", "██   ██", "██   ██", "██   ██", "██   ██", "██   ██", "███████"],
    '1': ["  ███  ", "    █  ", "    █  ", "    █  ", "    █  ", "    █  ", "  █████"],
    '2': ["███████", "     ██", "     ██", "███████", "██     ", "██     ", "███████"],
    '3': ["███████", "     ██", "     ██", "███████", "     ██", "     ██", "███████"],
    '4': ["██   ██", "██   ██", "██   ██", "███████", "     ██", "     ██", "     ██"],
    '5': ["███████", "██     ", "██     ", "███████", "     ██", "     ██", "███████"],
    '6': ["███████", "██     ", "██     ", "███████", "██   ██", "██   ██", "███████"],
    '7': ["███████", "     ██", "    ██ ", "   ██  ", "  ██   ", "  ██   ", "  ██   "],
    '8': ["███████", "██   ██", "██   ██", "███████", "██   ██", "██   ██", "███████"],
    '9': ["███████", "██   ██", "██   ██", "███████", "     ██", "     ██", "███████"],
    ':': ["       ", "  ███  ", "  ███  ", "       ", "  ███  ", "  ███  ", "       "],
    ' ': ["       ", "       ", "       ", "       ", "       ", "       ", "       "],
}


def get_font(name='digital'):
    """Get font by name."""
    fonts = {
        'digital': FONT_DIGITAL,
        'block': FONT_BLOCK,
        'thin': FONT_THIN,
        'outline': FONT_OUTLINE,
        'mega': FONT_MEGA,
    }
    return fonts.get(name, FONT_DIGITAL)


def get_char_width(font):
    """Get character width for a font."""
    sample = font.get('0', [''])[0]
    return len(sample)


def get_char_height(font):
    """Get character height for a font."""
    sample = font.get('0', [])
    return len(sample)


def get_text_width(text, font):
    """Calculate total width of text in given font."""
    char_w = get_char_width(font)
    return len(text) * (char_w + 1) - 1  # +1 spacing, -1 for last


def draw_text(buffer, x, y, text, font, color, z=-10):
    """Draw text using specified font into buffer."""
    char_w = get_char_width(font)
    cursor_x = int(x)
    
    for char in text:
        if char in font:
            bitmap = font[char]
            for row_idx, row_str in enumerate(bitmap):
                for col_idx, pixel in enumerate(row_str):
                    if pixel not in [' ', ' ']:  # Not empty
                        px = cursor_x + col_idx
                        py = int(y) + row_idx
                        buffer.set_pixel(px, py, pixel, z=z, color=color)
            cursor_x += char_w + 1  # Width + spacing
        else:
            cursor_x += char_w // 2  # Unknown char spacing
